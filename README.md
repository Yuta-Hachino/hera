# AIファミリー・シミュレーター「未来の家族を体験」

## 📋 プロダクト概要

AIファミリー・シミュレーターは、Google ADKベースのHeraエージェントが自然な対話を通じてユーザー情報を収集し、生成AIが「未来の家族の日常ストーリー」「家族旅行のイラスト」「子どもからの未来の手紙」を生成するアプリケーションです。

**目的**: 結婚や出産に対する心理的な不安を軽減し、「子どもを持つ未来」をポジティブに体験してもらうこと

### 🔧 技術的特徴
- **Google ADK統合**: 高度なエージェント対話システム
- **REST API**: Flask ベースのWeb API（ポート8080）
- **セッション管理**: ファイルベースの永続化
- **Unicode対応**: Windows環境での文字エンコーディング問題を解決

### 🎯 プロダクト評価

| 項目 | 評価 | 詳細 |
|------|------|------|
| **技術力** | 中〜高 | フォーム入力→テキスト生成→画像生成を組み合わせ |
| **生成AI活用度** | 高 | 文章＋画像＋感情的な手紙などマルチ活用 |
| **創造性** | 高 | 「子どもを持つ未来」を疑似体験させるのは新しい |
| **社会的影響度** | 高 | 結婚・出産に対する心理的ポジティブ変化を促す |
| **1週間MVP** | 実現可能 | 入力→短い未来シナリオ＋家族画像生成 |

---

## 🎯 背景と課題

### 社会課題
- **少子化の要因**: 出産・育児に対する不安が大きな要因の一つ
- **若年層の心理**: 「自分に子育ては無理」「生活が苦しくなる」という先入観
- **解決の可能性**: 未来の家族像を具体的にイメージできれば、ポジティブな動機付けになる

### ターゲットユーザー

#### プライマリーユーザー
- **結婚・出産を考えている20〜30代の男女**
- **出産・子育てに不安を持つカップル**

#### セカンダリーユーザー
- **行政やNPOなど、少子化対策や結婚支援の施策に関心がある団体**

---

## 🚀 機能要件

### 1. Google ADKベース ヘーラーエージェント対話システム

#### 高度な対話機能
Google ADKを活用したヘーラーエージェントが自然な対話を通じて以下の情報を収集：

- **基本情報**
  - 年齢
  - 収入（ざっくりレンジでOK）
  - ライフスタイル（都会／地方、趣味、仕事のスタイルなど）
  - 家族構成

- **音声・画像情報**
  - 音声入力による自然な対話
  - 顔写真（自分・パートナー）※特徴を伝えて生成も可能

#### AIエージェント「ヘーラー（Hera）」
- **役割**: Google ADKベースの家族愛の神として、高度な対話でユーザー情報を収集
- **技術**: Google Cloud AI Platform、Dialogflow、Speech-to-Text、Text-to-Speech
- **領域**: 結婚、家庭、貞節、妻の守護
- **象徴**: 孔雀、王冠、ザクロ
- **概要**: ゼウスの妻であり、正妻や結婚制度の守護神。愛情深い一方で嫉妬深い面もあり、「夫婦愛と嫉妬」という人間的な愛の形を象徴
- **機能**: 音声対応、リアルタイム対話、AI駆動の情報抽出

### 2. Google ADKエージェントシステム

#### ADKベースのエージェント
Google ADKの正式なフレームワークを使用した高度なエージェントシステム：

- **ADKHeraAgent**: 家族愛の神としてのヘーラーエージェント
- **LLM統合**: Gemini Proとの完全統合
- **メモリ管理**: ADKのメモリシステムを活用
- **ツール統合**: ADKのツールシステムを活用

#### 高度な対話機能
- **音声対応**: Speech-to-Text & Text-to-Speech
- **リアルタイム対話**: WebSocket対応
- **文脈理解**: 会話の流れを理解した応答
- **感情認識**: ユーザーの感情を考慮した対話

### 3. コンテンツ生成システム

#### 生成コンテンツ
1. **未来の家族ストーリー**
   - 日常のストーリーをストリーム表示
   - イラストと背景にストーリーを組み合わせ

2. **家族旅行イラスト**
   - 会話内容をインプットにしたイラスト生成
   - 高品質な家族旅行画像

3. **子どもからの手紙**
   - 毎回異なる子どもの落書き付き手紙画像を生成
   - 手紙の文章と落書きを組み合わせた画像を動的生成
   - 子どもの年齢に応じた落書きスタイル（幼児のクレヨン画、小学生の鉛筆画など）

4. **動画コンテンツ**
   - ストーリーをインプットにした動画表示
   - ストーリー読み終了後、イラストが動き出す
   - 音声付き（可能な範囲で）

---

## 🎬 ユースケース（デモ想定）

### 1. ヘーラーエージェント対話フェーズ
1. ユーザーがアプリにアクセス
2. 「ヘーラー（Hera）」エージェントが音声で案内
3. 自然な対話でユーザー情報を収集（年齢、収入、ライフスタイル等）
4. 収集した情報を一時ファイルに保存
5. 音声入力で自然な情報収集

### 2. 家族マルチエージェント対話フェーズ
1. エージェントが高度な対話でユーザー情報を収集
2. Gemini Proを使用した自然な会話処理
3. 音声入力・出力による直感的な対話体験
4. リアルタイムでの情報抽出と分析

### 3. コンテンツ生成フェーズ
1. 収集した情報を基に家族の未来ストーリーを生成
2. 高品質な家族画像の生成
3. 音声付き動画コンテンツの作成
4. 個別化された家族体験の提供

### 4. コンテンツ表示フェーズ
1. イラストとストーリーを組み合わせて表示
2. 動画コンテンツの生成・再生
3. 子どもからの手紙の表示（毎回異なる落書き付き画像を動的生成）

---

## 🏗️ 技術要件

### フロントエンド
- **音声入力**: Web Speech API + Google Cloud Speech-to-Text
- **リアルタイム表示**: FastAPI stream表示
- **動画再生**: TBD
- **音声出力**: Google Cloud Text-to-Speech

### バックエンド
- **API サーバー**: Flask + CORS対応
- **AI生成**: Google Gemini API + Google ADK
- **エージェント**: ADKHeraAgent（Google ADK統合）
- **画像生成**: Gemini API
- **音声処理**: Google Cloud Speech-to-Text & Text-to-Speech
- **セッション管理**: ファイルベース（JSON）

### インフラ
- **ホスティング**: ローカルホスト

---

## 📊 成功指標

### 定量的指標
- **ユーザーエンゲージメント**: セッション時間、ページ滞在時間
- **コンテンツ生成数**: 生成されたストーリー、イラスト、手紙の数
- **ユーザー満足度**: アンケート結果、評価スコア

### 定性的指標
- **心理的変化**: 出産・育児に対する不安の軽減
- **未来イメージ**: 家族を持つ未来へのポジティブなイメージ
- **社会的影響**: 少子化対策への貢献度

---

## 🚀 セットアップと実行

### 🐳 Docker を使う場合（推奨）

```bash
# 1. 環境変数を設定
cp backend/.env.example .env
# .envファイルを編集してGEMINI_API_KEYを設定

# 2. Dockerコンテナを起動
docker-compose up --build

# アクセス:
# フロントエンド: http://localhost:3000
# バックエンドAPI: http://localhost:8080
# Google ADK開発UI: http://localhost:8000
```

詳細は [docs/deployment/DOCKER.md](docs/deployment/DOCKER.md) を参照してください。

**デプロイメントガイド**: [docs/deployment/DEPLOYMENT.md](docs/deployment/DEPLOYMENT.md)も参照してください（Docker、Cloud Run対応）。

### ⚙️ ローカル環境で実行する場合

詳細な実行手順は [backend/README.md](backend/README.md) を参照してください。

```bash
# 1. 仮想環境を作成・有効化
python3 -m venv venv
source venv/bin/activate  # macOS/Linux
# .venv\Scripts\activate   # Windows

# 2. 依存関係をインストール
pip install -r backend/requirements.txt

# 3. 環境変数を設定（backend/.envファイルを作成）
cd backend
cp .env.example .env
# .envファイルを編集してAPIキーを設定

# 4. APIサーバーを起動
cd backend
python api/app.py
# http://localhost:8080 にアクセス
```

### 利用可能なAPI

#### REST API エンドポイント

1. **セッション管理**
   - `POST /api/sessions` - セッション作成
   - `GET /api/sessions/{id}/status` - セッション状態取得
   - `POST /api/sessions/{id}/complete` - セッション完了

2. **対話機能**
   - `POST /api/sessions/{id}/messages` - メッセージ送信・ヒアリング

3. **システム**
   - `GET /api/health` - ヘルスチェック

#### 利用可能なエージェント

1. **ADKHeraAgent** - プロファイル収集エージェント（Google ADK統合）
2. **Family Agent** - 家族会話エージェント（ストーリー・手紙生成）

### API使用例

```bash
# 1. セッション作成
curl -X POST http://localhost:8080/api/sessions

# 2. メッセージ送信
curl -X POST http://localhost:8080/api/sessions/{session_id}/messages \
  -H "Content-Type: application/json" \
  -d '{"message": "こんにちは、33歳のエンジニアです"}'

# 3. セッション状態確認
curl http://localhost:8080/api/sessions/{session_id}/status
```

詳しくは [backend/README.md](backend/README.md) をご覧ください。

---

## 📚 ドキュメント

プロジェクトの詳細なドキュメントは `docs/` ディレクトリに整理されています：

- **[デプロイメント](docs/deployment/)** - Docker、Cloud Run、Vercelへのデプロイ方法
- **[アーキテクチャ](docs/architecture/)** - システム設計、統合計画、アーキテクチャ図
- **[移行](docs/migration/)** - GCP移行計画、Redis/Supabase移行ガイド
- **[レポート](docs/reports/)** - 分析レポート、実装ギャップ、修正履歴

詳細は [docs/README.md](docs/README.md) を参照してください。

---

## 📝 備考

- 本プロダクトは社会的意義の高いプロジェクトとして、技術的な実現可能性と社会的インパクトの両方を重視
- ユーザーのプライバシー保護とデータセキュリティを最優先
- 生成AIの倫理的使用とコンテンツの適切性を確保
